# 网站自动安装模块的实现

网站部署的时候，为了方便推广，最好可以在线部署，不需要用命令行等被黑色的终端所折磨。下面参考[Yii2CMF](https://github.com/yidashi/yii2cmf) 的安装方式，记录怎么实现网站的自动安装。

## 一、引言

1. 安装的过程，应该在第一次访问网站的时候，就检测是否已经安装。
1. 为了方便安装，最好已经启用 Yii 的部分功能。
1. 安装环境是否合适、文件夹读写权限、数据库等相关的配置文件应当在安装过程中录入。
1. 网站需要的第一个用户，也就是超级管理员，应当在安装的时候一次性注册，后面不再给继续注册的机会。

## 二、安装文件夹设计

因为 `install`(安装)功能，跟 `frontend`(前台)，`backend`(后台) 和 `common`(通用) 三个功能是等价的，相当于一个模块。可以跟后面三个文件夹同一层次新建一个文件夹 `install`。新建后的目录如下，

```
.
├── backend
├── cache
├── common
├── console
├── frontend
├── install
├── 其他文件文件夹省略
```

其中可以借助 Yii 2 生成 MVC 模式的三个文件夹及内容，在后面叙述。为了引导到安装页面，还需要在浏览前台的时候，检测跳转到安装页面。

## 三、引导到安装页面

根据上述分析，第一次进入网站，应当在启用 Yii 部分功能后，读取配置前，跳转到安装界面，并在安装界面里，做好配置。参考前台页面自动生成的*./frontend/web/index.php*，故*./web/index.php* 内容可以如下。


<iframe src='../code/install-diff.html' width="100%" height="80%"></iframe>

从上面代码中可以看出修改的部分，

